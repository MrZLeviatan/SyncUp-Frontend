<!-- Contenedor principal del menú de usuario -->
<div class="contenedor-menu">
  <!-- Título dinámico de la lista: solo visible para radio o descubrimiento semanal -->
  <h2
    *ngIf="filtroActivo === 'radio' || filtroActivo === 'descubrimiento'"
    class="titulo-radio animar-titulo"
  >
    <!-- Icono dinámico según tipo de filtro -->
    <i class="fa" [ngClass]="filtroActivo === 'radio' ? 'fa-broadcast-tower' : 'fa-music'"></i>
    {{ tituloRadio }}
  </h2>

  <!-- Sección de botones para filtrar la lista de canciones -->
  <div class="botones-filtros">
    <button (click)="mostrarCancionesGenerales()" [class.active]="filtroActivo === 'general'">
      Canciones Generales
    </button>
    <button (click)="mostrarFavoritas()" [class.active]="filtroActivo === 'favoritas'">
      Tus Favoritas
    </button>
    <button (click)="mostrarDescubrimiento()" [class.active]="filtroActivo === 'descubrimiento'">
      Descubrimiento Semanal
    </button>
  </div>

  <!-- Lista de canciones centrada en la UI -->
  <div class="lista-wrapper">
    <app-lista-canciones
      [canciones]="canciones"
      [alturaLista]="600"
      (cancionSeleccionada)="onSeleccionarCancion($event)"
    ></app-lista-canciones>
  </div>
</div>

<!-- Reproductor de música fijo estilo Spotify -->
<div class="player-container" *ngIf="cancionActual">
  <!-- Sección izquierda: portada y detalles de la canción -->
  <div class="player-left">
    <img [src]="cancionActual.urlPortada" class="player-cover" />
    <div class="player-info">
      <h3>{{ cancionActual.titulo }}</h3>
      <p *ngIf="artistaActual">{{ artistaActual.nombreArtistico }}</p>
      <p *ngIf="!artistaActual">Artista desconocido</p>
    </div>
  </div>

  <!-- Sección central: controles de reproducción y barra de progreso -->
  <div class="player-center">
    <div class="controls">
      <!-- Botón canción anterior -->
      <button class="control-btn" (click)="anteriorCancion()">
        <i class="fa fa-step-backward"></i>
      </button>

      <!-- Botón play/pause -->
      <button class="control-btn play-btn" (click)="togglePlay()">
        <i class="fa" [ngClass]="reproduciendo ? 'fa-pause' : 'fa-play'"></i>
      </button>

      <!-- Botón canción siguiente -->
      <button class="control-btn" (click)="siguienteCancion()">
        <i class="fa fa-step-forward"></i>
      </button>

      <!-- Botón iniciar radio basado en la canción actual -->
      <button
        class="control-btn"
        (click)="iniciarRadio()"
        [class.active]="filtroActivo === 'radio'"
      >
        <i class="fa fa-broadcast-tower"></i>
      </button>

      <!-- Botón agregar/quitar de favoritos -->
      <button class="control-btn" (click)="toggleFavorito()">
        <i [ngClass]="esFavorita ? 'fas fa-heart' : 'far fa-heart'"></i>
      </button>
    </div>

    <!-- Barra de progreso de la canción -->
    <div class="progress-wrapper">
      <span class="time">{{ tiempoActual }}</span>
      <input type="range" class="progress-bar" [value]="progreso" (input)="cambiarTiempo($event)" />
      <span class="time">{{ duracionTotal }}</span>
    </div>
  </div>

  <!-- Sección derecha: control de volumen -->
  <div class="player-right">
    <i class="fa fa-volume-up"></i>
    <input
      type="range"
      class="volume-bar"
      min="0"
      max="1"
      step="0.01"
      (input)="cambiarVolumen($event)"
    />
  </div>

  <!-- Elemento de audio HTML para reproducir la canción -->
  <audio id="player-audio" [src]="cancionActual.urlCancion"></audio>
</div>
